"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[741],{67741:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container py-5"},[r("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.handleSubmit.apply(null,arguments)}}},[r("div",{staticClass:"form-group mb-3"},[r("label",{staticClass:"mb-2",attrs:{for:"name"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",placeholder:"Enter Name",required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),r("div",{staticClass:"form-group mb-3"},[r("label",{staticClass:"mb-2",attrs:{for:"image"}},[e._v("Image")]),e.image?r("img",{staticClass:"d-block img-thumbnail mb-3",attrs:{src:e.image,width:"300",height:"300"}}):e._e(),r("input",{staticClass:"form-control-file",attrs:{id:"image",type:"file",name:"image",accept:"image/*"},on:{change:e.handleFileChange}})]),r("button",{staticClass:"btn btn-primary",attrs:{disabled:e.isProcessing,type:"submit"}},[e._v(" "+e._s(e.isProcessing?"資料更新中":"Submit")+" ")])])])},a=[],s=r(4367),i=r(67906),o=r(16198),u=(r(68309),r(41539),r(78783),r(33948),r(60285),r(41637),r(21703),r(39714),r(76017)),c=r(41926),m=r(34665),l={data:function(){return{id:"",email:"",name:"",image:"",isProcessing:!1}},methods:{setUser:function(){this.id=this.currentUser.id,this.email=this.currentUser.email,this.name=this.currentUser.name,this.image=this.currentUser.image},handleFileChange:function(e){var t=e.target.files;if(0!==t.length){var r=window.URL.createObjectURL(t[0]);this.image=r}else this.image=""},handleSubmit:function(e){var t=this;return(0,o.Z)((0,i.Z)().mark((function r(){var n,a,s,o,m;return(0,i.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.name){r.next=3;break}return c.F.fire({icon:"warning",title:"請填寫使用者姓名"}),r.abrupt("return");case 3:return r.prev=3,t.isProcessing=!0,n=e.target,a=new FormData(n),s=t.currentUser.id,r.next=10,u.Z.update({userId:s,formData:a});case 10:if(o=r.sent,m=o.data,"success"===m.status){r.next=14;break}throw new Error(m.message);case 14:t.isProcessing=!1,r.next=22;break;case 17:r.prev=17,r.t0=r["catch"](3),t.isProcessing=!1,console.log("error",r.t0),c.F.fire({icon:"error",title:"無法更新使用者資訊，請稍後再試"});case 22:case"end":return r.stop()}}),r,null,[[3,17]])})))()}},computed:(0,s.Z)({},(0,m.rn)(["currentUser"])),watch:{currentUser:function(){this.setUser()}},created:function(){var e=this.$route.params.id;e.toString()===this.currentUser.id.toString()||this.$router.push({name:"not-found"})},beforeRouteUpdate:function(e,t,r){var n=this.$route.params.id;n.toString()===this.currentUser.id.toString()?r():this.$router.push({name:"not-found"})}},d=l,h=r(1001),f=(0,h.Z)(d,n,a,!1,null,null,null),g=f.exports}}]);
//# sourceMappingURL=741-legacy.188883cd.js.map