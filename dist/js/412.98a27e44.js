"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[412],{4412:function(t,a,s){s.r(a),s.d(a,{default:function(){return f}});var r=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container py-5"},[s("NavTabs"),s("h1",{staticClass:"mt-5"},[t._v(" 人氣餐廳 ")]),s("hr"),t._l(t.restaurants,(function(a){return s("div",{key:a.id,staticClass:"card mb-3",staticStyle:{"max-width":"540px",margin:"auto"}},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-md-4"},[s("router-link",{attrs:{to:{name:"restaurant",params:{id:a.id}}}},[s("img",{staticClass:"card-img",attrs:{src:t._f("emptyImage")(a.image)}})])],1),s("div",{staticClass:"col-md-8"},[s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title"},[t._v(" "+t._s(a.name)+" ")]),s("span",{staticClass:"badge bg-secondary"},[t._v("收藏數："+t._s(a.FavoriteCount))]),s("p",{staticClass:"card-text"},[t._v(" "+t._s(a.description)+" ")]),s("router-link",{staticClass:"btn btn-primary mx-2",attrs:{to:{name:"restaurant",params:{id:a.id}}}},[t._v(" Show ")]),a.isFavorited?s("button",{staticClass:"btn btn-danger mx-2",attrs:{type:"button"},on:{click:function(s){return t.deleteFavorite(a.id)}}},[t._v(" 移除最愛 ")]):s("button",{staticClass:"btn btn-primary mx-2",attrs:{type:"button"},on:{click:function(s){return t.addFavorite(a.id)}}},[t._v(" 加到最愛 ")])],1)])])])}))],2)},e=[],i=(s(1703),s(9697)),n=s(8247),o=s(1947),c=s(6017),d=s(1926);var u={mixins:[n.P],components:{NavTabs:i.Z},data(){return{restaurants:[]}},methods:{async fetchRestaurants(){try{const{data:t}=await o.Z.getTopRestaurants();this.restaurants=t.restaurants}catch(t){console.log("error",t),d.F.fire({icon:"error",title:"無法取得人氣餐廳，請稍後再試"})}},async addFavorite(t){try{const{data:a}=await c.Z.addFavorite({restaurantId:t});if("success"!==a.status)throw new Error(a.message);this.restaurants.forEach((a=>{a.id===t&&(a.isFavorited=!0,a.FavoriteCount+=1)}))}catch(a){console.log(a),d.F.fire({icon:"error",title:"無法加到最愛，請稍後再試"})}},async deleteFavorite(t){try{const{data:a}=await c.Z.deleteFavorite({restaurantId:t});if("success"!==a.status)throw new Error(a.message);this.restaurants.forEach((a=>{a.id===t&&(a.isFavorited=!1,a.FavoriteCount-=1)}))}catch(a){console.log(a),d.F.fire({icon:"error",title:"無法加到最愛，請稍後再試"})}}},created(){this.fetchRestaurants()}},l=u,v=s(1001),m=(0,v.Z)(l,r,e,!1,null,null,null),f=m.exports}}]);
//# sourceMappingURL=412.98a27e44.js.map